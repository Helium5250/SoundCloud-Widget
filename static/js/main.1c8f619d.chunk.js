(this["webpackJsonpsoundcloud-widget"]=this["webpackJsonpsoundcloud-widget"]||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(15),a=n.n(i),u=(n(24),n(3)),s=n.n(u),o=n(5),l=n(2),f=(n(26),n(9)),d=n.n(f),j={init:function(e){d.a.initialize({client_id:e})},getTracks:function(e,t){d.a.get("/tracks",{q:e}).then((function(e){return t(e)}))},getPlayer:function(e){return Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.stream("/tracks/"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},b=n(1);function O(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],a=Object(r.useRef)();return Object(b.jsxs)("div",{id:"searchBar",children:[Object(b.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search",ref:a,value:c,onChange:function(e){return i(e.target.value)},onKeyUp:function(t){return"Enter"===t.key&&e.returnInput(t.target.value)}}),Object(b.jsx)("div",{id:"clearDiv",children:Object(b.jsx)("span",{id:"clear",className:"material-icons btn",onClick:function(){i(""),a.current.focus()},children:"clear"})})]})}var h,m,p=n(19),v=n(11),x=n(12),A=x.a.div(h||(h=Object(v.a)(["\n  margin: auto;\n\n  @keyframes sk-stretchdelay {\n    0%, 40%, 100% { \n      transform: scaleY(0.4);\n    }  20% { \n      transform: scaleY(1.0);\n    }\n  }\n"]))),g=x.a.div(m||(m=Object(v.a)(["\n  display: inline-block;\n  background-color: ",";\n  height: ","px;\n  width: ","px;\n  margin: 0 ","px;\n\n  animation: sk-stretchdelay ","s infinite ease-in-out;\n  animation-delay: -","s;\n"])),(function(e){return e.color||"white"}),(function(e){return e.height||50}),(function(e){return e.width||6}),(function(e){return e.width/3||2}),(function(e){return.7+e.num/10}),(function(e){return 1.1-e.index/10}));function y(e){var t=e.num||5;return Object(b.jsx)(A,{children:Object(p.a)(Array(t)).map((function(n,r){return Object(b.jsx)(g,{index:r,num:t,color:e.color,height:e.height,width:e.width},r)}))})}var k=n(8),w=function(e){return e.hasOwnProperty("current")?e.current:e},R=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object(r.useRef)(null);Object(r.useEffect)((function(){i.current=n}),[n]),Object(r.useEffect)((function(){var n=w(e);if(n&&n.addEventListener){var r=function(e){return i.current(e)};return n.addEventListener(t,r,c),function(){return n.removeEventListener(t,r,c)}}}),[e,t,c])},N=function(e,t,n){return Math.min(Math.max(e,t),n)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Object(r.useRef)(!1),c=Object(r.useRef)({x:0,y:0}),i=Object(r.useRef)({x:0,y:0}),a=Object(r.useRef)({x:0,y:0}),u=Object(r.useCallback)((function(){var e=w(t);return{x:window.innerWidth-e.offsetWidth,y:window.innerHeight-e.offsetHeight}}),[t]);Object(r.useEffect)((function(){a.current=u()}),[u]),R(window,"resize",(function(){a.current=u(),s()})),R(e,"mousedown",(function(e){var r=w(t);n.current=!0,i.current={x:e.clientX,y:e.clientY},c.current={x:i.current.x-r.offsetLeft,y:i.current.y-r.offsetTop}}),!0),R(document,"mouseup",(function(){n.current=!1}),!0),R(document,"mousemove",(function(e){e.preventDefault(),n.current&&s(e)}),!0);var s=function(e){var n=w(t);i.current={x:N(((null===e||void 0===e?void 0:e.clientX)||i.current.x+c.current.x)-c.current.x,0,a.current.x),y:N(((null===e||void 0===e?void 0:e.clientY)||i.current.y+c.current.y)-c.current.y,0,a.current.y)},n.style.left=i.current.x+"px",n.style.top=i.current.y+"px"}};function L(e){return[e%3600/60,e%60].map((function(e){return"0".concat(Math.floor(e)).slice(-2)})).join(":")}function B(e){var t=e.info,n=Object(k.a)(e,["info"]),c=Object(r.useRef)();return E(c),Object(b.jsxs)("div",{id:"miniplayer",ref:c,children:[Object(b.jsx)("img",{className:"cover",alt:t.title+" cover",src:t.imgURL||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),Object(b.jsxs)("div",{id:"overlay",children:[Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("p",{className:"title",children:t.title}),Object(b.jsx)("p",{className:"artist",children:t.artist}),Object(b.jsxs)("p",{className:"timestamp",children:[L(t.timestamp)," / ",L(t.duration)]})]}),Object(b.jsxs)("div",{className:"control",children:[Object(b.jsx)("span",{id:"previous",className:"material-icons btn",onClick:function(){return n.skip(!1)},children:"skip_previous"}),Object(b.jsx)("span",{id:"play",className:"material-icons btn",onClick:n.onPause,children:n.pause?"play_arrow":"pause"}),Object(b.jsx)("span",{id:"next",className:"material-icons btn",onClick:function(){return n.skip(!0)},children:"skip_next"})]})]})]})}function C(e){var t=e.info,n=Object(k.a)(e,["info"]);return Object(b.jsxs)("div",{className:"track",children:[Object(b.jsx)("img",{className:"cover",alt:t.title+" cover",src:t.imgURL||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("p",{className:"title",children:t.title}),Object(b.jsx)("p",{className:"artist",children:t.artist})]}),Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("span",{id:"add",className:"material-icons btn",onClick:n.play,children:"add_box"})})]})}var S=function(e){return Math.floor(e/1e3)};var I=function(){var e,t=Object(r.useRef)();Object(r.useEffect)((function(){j.init("cd9be64eeb32d1741c17cb39e41d254d")}),[]);var n=Object(r.useState)("coldStart"),c=Object(l.a)(n,2),i=c[0],a=c[1],u=Object(r.useState)([]),f=Object(l.a)(u,2),d=f[0],h=f[1],m=Object(r.useState)(null),p=Object(l.a)(m,2),v=p[0],x=p[1],A=Object(r.useCallback)((function(e){x((function(t){var n=d.indexOf(t);return d[e?n+1:n-1]||t}))}),[d]),g=Object(r.useState)(1),k=Object(l.a)(g,2),w=k[0],R=k[1];Object(r.useEffect)((function(){return v&&Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,j.getPlayer(v.id);case 3:t.current=e.sent,D(!1),t.current.play(),t.current.on("play-start",(function(){return R(S(t.current.getDuration()))}));case 7:case"end":return e.stop()}}),e)})))()}),[v]);var N=Object(r.useState)(0),E=Object(l.a)(N,2),L=E[0],I=E[1];Object(r.useEffect)((function(){setTimeout((function(){t.current&&I(S(t.current.currentTime())),L===w&&A(!0)}),1e3)}),[A,w,L]);var P=Object(r.useState)(!1),T=Object(l.a)(P,2),_=T[0],D=T[1];return Object(r.useEffect)((function(){return t.current&&(_?t.current.pause():t.current.play())}),[_]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,{returnInput:function(e){a("fetching"),j.getTracks(e,(function(e){a("fetched"),h(e)}))}}),Object(b.jsx)("div",{id:"searchResults",children:function(){switch(i){case"fetching":return Object(b.jsx)(y,{});case"fetched":return 0===d.length?Object(b.jsx)("div",{id:"noResult",children:"No Result :("}):d.map((function(e,t){var n;return Object(b.jsx)(C,{info:{title:e.title,artist:e.user.username,imgURL:null===(n=e.artwork_url)||void 0===n?void 0:n.replace(/large(?=.jpg)/i,"small")},play:function(){return x(d[t])}},t)}));default:return}}()}),v&&Object(b.jsx)(B,{info:{trackId:v.id,title:v.title,artist:v.user.username,timestamp:L,duration:w,imgURL:null===(e=v.artwork_url)||void 0===e?void 0:e.replace(/large(?=.jpg)/i,"t500x500")},pause:_,onPause:function(){return D((function(e){return!e}))},skip:A})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),P()}},[[30,1,2]]]);
//# sourceMappingURL=main.1c8f619d.chunk.js.map