(this.webpackJsonpcrats=this.webpackJsonpcrats||[]).push([[0],[,,,,,function(e,t,r){e.exports={miniplayer:"Miniplayer_miniplayer__2E8Qt",cover:"Miniplayer_cover__CKtS-",trackProgress:"Miniplayer_trackProgress__buOYw",overlay:"Miniplayer_overlay__22zGG",draggie:"Miniplayer_draggie__2uRry",expand:"Miniplayer_expand__GDrpU",info:"Miniplayer_info__GK1y_",title:"Miniplayer_title__3v4w-",artist:"Miniplayer_artist__bb67l",timestamp:"Miniplayer_timestamp__2SVyR",control:"Miniplayer_control__3gFYx",play:"Miniplayer_play__24ico"}},function(e,t,r){"use strict";r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"e",(function(){return b})),r.d(t,"h",(function(){return j})),r.d(t,"a",(function(){return O})),r.d(t,"g",(function(){return y})),r.d(t,"f",(function(){return h}));var n=r(3),a=r.n(n),c=r(10),i=r(4),s=r(12),u=r(19),o=r.n(u),l=r(13),d=Object(i.b)("player/playTrack",(function(e,t){var r=t.getState;return Object(s.a)(Object(c.a)(a.a.mark((function e(){var t,n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r(),n=t.player,c=t.track,i=c.tracks[n.currentTrackIndex],e.next=4,o.a.stream("/tracks/"+i.id);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))))})),f=Object(i.b)("player/pauseTrack",(function(e,t){var r=t.getState;return Object(s.a)(Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r().player.player){e.next=3;break}return e.abrupt("return");case 3:if(!t.isPlaying()){e.next=8;break}return e.next=6,t.pause();case 6:e.next=10;break;case 8:return e.next=10,t.play();case 10:case"end":return e.stop()}}),e)}))))})),b=Object(i.b)("player/seekTrack",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getState,e.abrupt("return",Object(s.a)(Object(c.a)(a.a.mark((function e(){var r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().player.player){e.next=3;break}return e.abrupt("return");case 3:return c=r.currentTime(),i=Object(l.a)(c+1e3*t,0,r.getDuration()),e.next=7,null===r||void 0===r?void 0:r.seek(i);case 7:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),j=Object(i.b)("player/skipTrack",(function(e,t){var r=t.getState;return Object(s.a)(Object(c.a)(a.a.mark((function t(){var n,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),c=n.player,i=n.track,c.player){t.next=3;break}return t.abrupt("return");case 3:if(t.t0=c.player.isPlaying(),!t.t0){t.next=7;break}return t.next=7,c.player.pause();case 7:if("prev"!==e){t.next=11;break}return t.abrupt("return",c.currentTrackIndex<=0?i.tracks.length-1:c.currentTrackIndex-1);case 11:return t.abrupt("return",c.currentTrackIndex>=i.tracks.length-1?0:c.currentTrackIndex+1);case 12:case"end":return t.stop()}}),t)}))))})),p=Object(i.d)({name:"player",initialState:{player:null,currentTrackIndex:-1},reducers:{changeTrack:function(e,t){e.currentTrackIndex=t.payload}},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,t){e.player=t.payload})).addCase(f.fulfilled,(function(){})).addCase(b.fulfilled,(function(){})).addCase(j.fulfilled,(function(e,t){e.currentTrackIndex=t.payload}))}}),O=p.actions.changeTrack;t.b=p.reducer;var x=function(e){return e.player},y=Object(i.c)(x,(function(e){return e})),h=Object(i.c)(x,(function(e){return e.track}),(function(e,t){return t.tracks[e.currentTrackIndex]}))},,function(e,t,r){"use strict";var n=r(14),a=r(17),c=r(30),i=r.n(c),s=r(25),u=r.n(s),o=r(1);t.a=function(e){var t=e.children,r=e.type,c=void 0===r?"button":r,s=e.styledAs,l=e.className,d=Object(a.a)(e,["children","type","styledAs","className"]);return Object(o.jsx)("button",Object(n.a)(Object(n.a)({className:u()(i.a.btn,s?i.a[s]:i.a.default,l),type:c},d),{},{children:t}))}},,,,function(e,t,r){"use strict";r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return x}));var n=r(7),a=r(4),c=r(15),i=r(46),s=r.n(i),u=r(6),o=r(42),l=r(39),d=r(19);r.n(d).a.initialize({client_id:"cd9be64eeb32d1741c17cb39e41d254d"});var f={key:"root",storage:s.a,whitelist:["playlist"]},b=Object(n.b)({player:u.b,track:o.a,playlist:l.c}),j=Object(c.g)(f,b),p=Object(a.a)({reducer:j,middleware:function(e){return e({serializableCheck:{ignoredActions:[c.a,c.f,c.b,c.c,c.d,c.e,"player/playTrack/fulfilled"],ignoredPaths:["player.player","track.tracks"]}})}}),O=Object(c.h)(p),x=function(e){try{return e()}catch(t){return console.error("redux store error:",t),t}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return i}));var n=function(e,t,r){return Math.min(Math.max(e,t),r)},a=function(e,t){return Math.floor(Math.random()*(t-e)+e)},c=function(e){return Math.floor(e/1e3)},i=function(e){return[e%3600/60,e%60].map((function(e){return"0".concat(Math.floor(e)).slice(-2)})).join(":")}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var n=r(24),a=function(){return Object(n.b)()},c=n.c},,,,function(e,t,r){"use strict";var n=r(0);t.a=function(e,t,r,a){var c=Object(n.useRef)(r);Object(n.useEffect)((function(){c.current=r}),[r]),Object(n.useEffect)((function(){if(e&&e.addEventListener){var r=function(e){return c.current(e)};return e.addEventListener(t,r,a),function(){return e.removeEventListener(t,r,a)}}}),[e,t,a])}},,,,,,,,function(e,t,r){e.exports={header:"Header_header__3PxdP",nav:"Header_nav__n1wYY",activeLink:"Header_activeLink__3QeWD"}},function(e,t,r){e.exports={searchbar:"Searchbar_searchbar__-X5cQ",searchbarControl:"Searchbar_searchbarControl__1G93j",focusTip:"Searchbar_focusTip__Oz1to"}},function(e,t,r){e.exports={btn:"Button_btn__9RM5l",bigWhite:"Button_bigWhite__EggS7"}},function(e,t,r){e.exports={errorDisplay:"ErrorFallback_errorDisplay__3Nq8i",errorInner:"ErrorFallback_errorInner__18O8o",errorMsg:"ErrorFallback_errorMsg__35oIC"}},,,,,,function(e,t,r){e.exports={messageDisplay:"MessageDisplay_messageDisplay__156mK",warning:"MessageDisplay_warning__1RBx6",error:"MessageDisplay_error__2detH"}},,function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return l}));var n=r(4),a=Object(n.d)({name:"playlist",initialState:{playlists:[]},reducers:{createPlaylist:function(e,t){var r={name:t.payload,tracks:[]};e.playlists.push(r)},addToPlaylist:function(e,t){var r=t.payload,n=r.playlist,a=r.track;e.playlists.forEach((function(e){e.name===n.name&&(!e.tracks.some((function(e){return e.id===a.id}))&&e.tracks.push(a))}))}},extraReducers:function(e){}}),c=a.actions,i=c.createPlaylist,s=c.addToPlaylist;t.c=a.reducer;var u=function(e){return e.playlist},o=Object(n.c)(u,(function(e){return e.playlists})),l=function(e){return Object(n.c)(u,(function(t){return t.playlists.filter((function(t){return t.name===e}))[0]}))}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(e,t,r){"use strict";r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"d",(function(){return j}));var n=r(3),a=r.n(n),c=r(10),i=r(4),s=r(12),u=r(19),o=r.n(u),l=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n){var c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/tracks",{q:t,limit:r,offset:n,linked_partitioning:1});case 2:return c=e.sent,i=c.collection,s=c.next_href,e.abrupt("return",{tracks:i,nextQuery:s});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),d=Object(i.b)("tracks/searchForTracks",(function(e){return Object(s.a)(Object(c.a)(a.a.mark((function t(){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e,20,0);case 2:return r=t.sent,n=r.tracks,t.abrupt("return",{tracks:n,input:e,limit:20,offset:20});case 5:case"end":return t.stop()}}),t)}))))})),f=Object(i.b)("tracks/queryNextPage",(function(e,t){var r=t.getState;return Object(s.a)(Object(c.a)(a.a.mark((function e(){var t,n,c,i,s,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r().track,n=t.input,c=t.limit,i=t.offset,e.next=3,l(n,c,i);case 3:return s=e.sent,u=s.tracks,o=s.nextQuery,e.abrupt("return",{tracks:u,offset:i+c,isThereMoreTracks:!!o});case 7:case"end":return e.stop()}}),e)}))))})),b=Object(i.d)({name:"track",initialState:{searchStatus:"idle",tracks:[],paginationStatus:"idle",input:"",limit:10,offset:0},reducers:{},extraReducers:function(e){e.addCase(d.pending,(function(e){e.searchStatus="pending"})).addCase(d.fulfilled,(function(e,t){e.searchStatus="fulfilled",e.tracks=t.payload.tracks,e.input=t.payload.input,e.limit=t.payload.limit,e.offset=t.payload.offset})).addCase(d.rejected,(function(e){e.searchStatus="rejected"})).addCase(f.pending,(function(e){e.paginationStatus="pending"})).addCase(f.fulfilled,(function(e,t){t.payload.isThereMoreTracks?(e.paginationStatus="idle",e.tracks=e.tracks.concat(t.payload.tracks),e.offset=t.payload.offset):e.paginationStatus="fulfilled"})).addCase(f.rejected,(function(e){e.paginationStatus="rejected"}))}});t.a=b.reducer;var j=Object(i.c)((function(e){return e.track}),(function(e){return e}))},function(e,t,r){"use strict";var n=r(14),a=r(17),c=r(37),i=r.n(c),s=r(25),u=r.n(s),o=r(1);t.a=function(e){var t=e.iconCode,r=e.message,c=e.className,s=e.severity,l=void 0===s?"default":s,d=Object(a.a)(e,["iconCode","message","className","severity"]);return Object(o.jsxs)("div",Object(n.a)(Object(n.a)({className:u()(i.a.messageDisplay,i.a[l],c)},d),{},{children:[Object(o.jsx)("div",{className:"material-icons",children:t}),r]}))}},,,,function(e,t,r){e.exports={main:"App_main__3T6IN"}},,function(e,t,r){},,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r(49);var n=r(0),a=r.n(n),c=r(27),i=r.n(c),s=r(22),u=r(24),o=r(45),l=r(12),d=r(47),f=r.n(d),b=r(2),j=r(16),p=r(6),O=r(28),x=r.n(O),y=r(21),h=r(29),v=r.n(h),m=r(20),k=r(8),_=r(1);function g(){var e=Object(b.f)(),t=Object(n.useState)(""),r=Object(y.a)(t,2),a=r[0],c=r[1],i=Object(n.useRef)(null),s=function(){""!==a&&e.push("/search/".concat(a))};return Object(m.a)(document.body,"keydown",(function(e){var t;"/"===e.key&&(e.preventDefault(),null===(t=i.current)||void 0===t||t.focus())})),Object(_.jsxs)("div",{className:v.a.searchbar,children:[Object(_.jsx)("input",{autoFocus:!0,placeholder:"Search",ref:i,value:a,onChange:function(e){return c(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&s()}}),Object(_.jsxs)("div",{className:v.a.searchbarControl,children:[Object(_.jsx)(k.a,{className:"material-icons",onClick:s,children:"search"}),Object(_.jsx)(k.a,{className:"material-icons",onClick:function(){c(""),i.current&&i.current.focus()},children:"clear"})]}),Object(_.jsxs)("div",{className:v.a.focusTip,children:["Press ",Object(_.jsx)("code",{children:"/"})," to Focus"]})]})}var w=function(e){var t=e.to,r=e.text;return Object(_.jsx)(s.b,{exact:!0,activeClassName:x.a.activeLink,to:t,children:r})},A=function(){return Object(_.jsxs)("header",{id:x.a.header,children:[Object(_.jsxs)("nav",{id:x.a.nav,children:[Object(_.jsx)(w,{to:"/",text:"Home"}),Object(_.jsx)(w,{to:"/library",text:"Library"}),Object(_.jsx)(w,{to:"/account",text:"Account"})]}),Object(_.jsx)(g,{})]})},C=r(3),N=r.n(C),M=r(10),T=r(5),S=r.n(T),E=r(13),I=r(41),R=r(14),D=r(17);var P=function(e){var t=e.controlledMode,r=void 0!==t&&t,a=e.children,c=Object(D.a)(e,["controlledMode","children"]),i=Object(n.useRef)(null),s=Object(n.useRef)(!1),u=Object(n.useRef)({x:0,y:0}),o=Object(n.useRef)({x:0,y:0}),l=Object(n.useRef)({x:0,y:0}),d=Object(n.useCallback)((function(){var e,t;return{x:document.body.clientWidth-((null===(e=i.current)||void 0===e?void 0:e.offsetWidth)||0),y:document.body.clientHeight-((null===(t=i.current)||void 0===t?void 0:t.offsetHeight)||0)}}),[]),f=Object(n.useCallback)((function(e){o.current={x:Object(E.a)(((null===e||void 0===e?void 0:e.clientX)||o.current.x+u.current.x)-u.current.x,0,l.current.x),y:Object(E.a)(((null===e||void 0===e?void 0:e.clientY)||o.current.y+u.current.y)-u.current.y,0,l.current.y)},i.current&&(i.current.style.left=o.current.x+"px",i.current.style.top=o.current.y+"px")}),[]);return Object(n.useEffect)((function(){var e,t;l.current=d(),o.current={x:(null===(e=i.current)||void 0===e?void 0:e.offsetLeft)||0,y:(null===(t=i.current)||void 0===t?void 0:t.offsetTop)||0}}),[d]),Object(m.a)(window,"resize",(function(){l.current=d(),f()})),Object(m.a)(document,"mouseup",(function(){s.current=!1}),!0),Object(m.a)(document,"mousemove",(function(e){e.preventDefault(),s.current&&f(e)}),!0),Object(_.jsx)("div",Object(R.a)(Object(R.a)({},c),{},{style:{position:"fixed"},ref:i,onMouseDown:function(e){var t,n;r&&!e.target.classList.contains("draggie")||(s.current=!0,o.current={x:e.clientX,y:e.clientY},u.current={x:o.current.x-((null===(t=i.current)||void 0===t?void 0:t.offsetLeft)||0),y:o.current.y-((null===(n=i.current)||void 0===n?void 0:n.offsetTop)||0)})},children:a}))};function B(){var e,t=Object(j.a)(),r=Object(j.b)(p.f),a=Object(j.b)(p.g).player,c=Object(n.useState)(0),i=Object(y.a)(c,2),s=i[0],u=i[1],o=Object(n.useState)(1),l=Object(y.a)(o,2),d=l[0],f=l[1];return Object(n.useEffect)((function(){Object(M.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.play();case 4:f(a.getDuration()),u(0);case 6:case"end":return e.stop()}}),e)})))()}),[t,a]),Object(n.useEffect)((function(){if(a){var e=setInterval((function(){var e=a.currentTime();e>=d?t(Object(p.h)("next")):u(e)}),1e3);return function(){return clearInterval(e)}}}),[t,a,d]),r?Object(_.jsxs)(P,{controlledMode:!0,id:S.a.miniplayer,children:[Object(_.jsx)("img",{className:S.a.cover,alt:r.title+" cover",src:(null===(e=r.artwork_url)||void 0===e?void 0:e.replace(/large(?=.jpg)/i,"t500x500"))||I.a}),Object(_.jsxs)("div",{id:S.a.overlay,children:[Object(_.jsx)(k.a,{id:S.a.draggie,className:"material-icons draggie",children:"drag_indicator"}),Object(_.jsx)(k.a,{id:S.a.expand,className:"material-icons",children:"launch"}),Object(_.jsxs)("div",{className:S.a.info,children:[Object(_.jsx)("p",{className:S.a.title,children:r.title}),Object(_.jsx)("p",{className:S.a.artist,children:r.user.username}),Object(_.jsxs)("p",{className:S.a.timestamp,children:[Object(E.b)(Object(E.d)(s))," / ",Object(E.b)(Object(E.d)(d))]})]}),Object(_.jsxs)("div",{className:S.a.control,children:[Object(_.jsx)(k.a,{id:S.a.rewind,className:"material-icons",onClick:function(){return t(Object(p.e)(-10))},children:"fast_rewind"}),Object(_.jsx)(k.a,{id:S.a.previous,className:"material-icons",onClick:function(){return t(Object(p.h)("prev"))},children:"skip_previous"}),Object(_.jsx)(k.a,{id:S.a.play,className:"material-icons",onClick:function(){return t(Object(p.c)())},children:(null===a||void 0===a?void 0:a.isPlaying())?"pause":"play_arrow"}),Object(_.jsx)(k.a,{id:S.a.next,className:"material-icons",onClick:function(){return t(Object(p.h)("next"))},children:"skip_next"}),Object(_.jsx)(k.a,{id:S.a.forward,className:"material-icons",onClick:function(){return t(Object(p.e)(10))},children:"fast_forward"})]})]}),Object(_.jsx)("progress",{id:S.a.trackProgress,max:d,value:s,onClick:function(e){var r=e.target,n=r.getBoundingClientRect(),a=(e.clientX-n.left)/r.clientWidth*d-s;t(Object(p.e)(a/1e3))}})]}):Object(_.jsx)(_.Fragment,{})}var L=r(31),F=r.n(L),z=r(48),H=r(43),W=function(e){var t=e.children,r=Object(b.f)();return Object(_.jsx)(z.ErrorBoundary,{onError:function(e){return console.error("ErrorBoundary error",e)},FallbackComponent:function(e){var t=e.error,n=e.resetErrorBoundary;return Object(_.jsx)(H.a,{className:F.a.errorDisplay,severity:"error",iconCode:"error",message:Object(_.jsxs)("div",{className:F.a.errorInner,children:[Object(_.jsx)("p",{children:"Something went wrong"}),Object(_.jsxs)("div",{className:F.a.errorMsg,children:[Object(_.jsx)("p",{children:"Received the following error:"}),Object(_.jsx)("pre",{children:t.message})]}),Object(_.jsx)(k.a,{styledAs:"bigWhite",onClick:function(){n(),r.push("/")},children:"Return Home"})]})})},children:t})},G=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,84))})),Q=Object(n.lazy)((function(){return Promise.all([r.e(6),r.e(3)]).then(r.bind(null,87))})),Y=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,85))})),K=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,86))}));var X=function(){var e=Object(j.a)(),t=Object(j.b)(p.g).currentTrackIndex;return Object(n.useEffect)((function(){e(Object(p.d)())}),[e,t]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(A,{}),Object(_.jsx)("main",{id:f.a.main,children:Object(_.jsx)(W,{children:Object(_.jsx)(n.Suspense,{fallback:"",children:Object(_.jsxs)(b.c,{children:[Object(_.jsx)(b.a,{exact:!0,path:"/",children:Object(_.jsx)(G,{})}),Object(_.jsx)(b.a,{exact:!0,path:"/search/:input",children:Object(_.jsx)(Q,{})}),Object(_.jsx)(b.a,{exact:!0,path:"/library",children:Object(_.jsx)(Y,{})}),Object(_.jsx)(b.a,{exact:!0,path:"/playlist/:playlistName",children:Object(_.jsx)(K,{})})]})})})}),Object(_.jsx)(B,{})]})};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(u.a,{store:l.c,children:Object(_.jsx)(o.a,{persistor:l.b,children:Object(_.jsx)(s.a,{basename:"/soundcloud-widget",children:Object(_.jsx)(X,{})})})})}),document.getElementById("root"))}],[[63,1,2]]]);
//# sourceMappingURL=main.98d30641.chunk.js.map