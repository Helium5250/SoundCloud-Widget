(this.webpackJsonpcrats=this.webpackJsonpcrats||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(14),a=n.n(i),u=(n(24),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))}),s=n(3),o=n.n(s),l=n(4),f=n(2),d=(n(26),n(8)),j=n.n(d),b={init:function(e){j.a.initialize({client_id:e})},getTracks:function(e,t){return Object(l.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.a.get("/tracks",{q:e});case 2:r=n.sent,t(r);case 4:case"end":return n.stop()}}),n)})))()},getPlayer:function(e){return Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.stream("/tracks/"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},v=n(1);function O(e){var t=e.returnInput,n=Object(r.useState)(""),c=Object(f.a)(n,2),i=c[0],a=c[1],u=Object(r.useRef)(null);return Object(v.jsxs)("div",{id:"searchBar",children:[Object(v.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search",ref:u,value:i,onChange:function(e){return a(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&t(e.target.value)}}),Object(v.jsx)("div",{id:"clearDiv",children:Object(v.jsx)("span",{id:"clear",className:"material-icons btn",onClick:function(){a(""),u.current&&u.current.focus()},children:"clear"})})]})}var h,m,p=n(18),x=n(10),A=n(11),g=A.a.div(h||(h=Object(x.a)(["\n  margin: auto;\n\n  @keyframes sk-stretchdelay {\n    0%, 40%, 100% { \n      transform: scaleY(0.4);\n    }  20% { \n      transform: scaleY(1.0);\n    }\n  }\n"]))),y=A.a.div(m||(m=Object(x.a)(["\n  display: inline-block;\n  background-color: ",";\n  height: ","px;\n  width: ","px;\n  margin: 0 ","px;\n\n  animation: sk-stretchdelay ","s infinite ease-in-out;\n  animation-delay: -","s;\n"])),(function(e){return e.color}),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width/3}),(function(e){return.7+e.num/10}),(function(e){return 1.1-e.index/10}));function k(e){var t=e.num,n=void 0===t?5:t,r=e.height,c=void 0===r?50:r,i=e.width,a=void 0===i?6:i,u=e.color,s=void 0===u?"white":u;return Object(v.jsx)(g,{children:Object(p.a)(Array(n)).map((function(e,t){return Object(v.jsx)(y,{index:t,num:n,color:s,height:c,width:a},t)}))})}var w=n(19),R=function(e){return e.current?e.current:e},N=function(e,t,n,c){var i=Object(r.useRef)(n);Object(r.useEffect)((function(){i.current=n}),[n]),Object(r.useEffect)((function(){var n=R(e);if(n&&n.addEventListener){var r=function(e){return i.current(e)};return n.addEventListener(t,r,c),function(){return n.removeEventListener(t,r,c)}}}),[e,t,c])},E=function(e,t,n){return Math.min(Math.max(e,t),n)},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Object(r.useRef)(!1),c=Object(r.useRef)({x:0,y:0}),i=Object(r.useRef)({x:0,y:0}),a=Object(r.useRef)({x:0,y:0}),u=Object(r.useCallback)((function(){var e=R(t);return{x:window.innerWidth-e.offsetWidth,y:window.innerHeight-e.offsetHeight}}),[t]);Object(r.useEffect)((function(){a.current=u()}),[u]),N(window,"resize",(function(){a.current=u(),s()})),N(e,"mousedown",(function(e){var r=R(t);n.current=!0,i.current={x:e.clientX,y:e.clientY},c.current={x:i.current.x-r.offsetLeft,y:i.current.y-r.offsetTop}}),!0),N(document,"mouseup",(function(){n.current=!1}),!0),N(document,"mousemove",(function(e){e.preventDefault(),n.current&&s(e)}),!0);var s=function(e){var n=R(t);i.current={x:E(((null===e||void 0===e?void 0:e.clientX)||i.current.x+c.current.x)-c.current.x,0,a.current.x),y:E(((null===e||void 0===e?void 0:e.clientY)||i.current.y+c.current.y)-c.current.y,0,a.current.y)},n.style.left=i.current.x+"px",n.style.top=i.current.y+"px"}},B=function(e){return[e%3600/60,e%60].map((function(e){return"0".concat(Math.floor(e)).slice(-2)})).join(":")};function S(e){var t=e.info,n=Object(w.a)(e,["info"]),c=Object(r.useRef)(null);return console.log("miniplayer",c),L(c),Object(v.jsxs)("div",{id:"miniplayer",ref:c,children:[Object(v.jsx)("img",{className:"cover",alt:t.title+" cover",src:t.imgURL||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),Object(v.jsxs)("div",{id:"overlay",children:[Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("p",{className:"title",children:t.title}),Object(v.jsx)("p",{className:"artist",children:t.artist}),Object(v.jsxs)("p",{className:"timestamp",children:[B(t.timestamp)," / ",B(t.duration)]})]}),Object(v.jsxs)("div",{className:"control",children:[Object(v.jsx)("span",{id:"previous",className:"material-icons btn",onClick:function(){return n.skip(!1)},children:"skip_previous"}),Object(v.jsx)("span",{id:"play",className:"material-icons btn",onClick:n.onPause,children:n.pause?"play_arrow":"pause"}),Object(v.jsx)("span",{id:"next",className:"material-icons btn",onClick:function(){return n.skip(!0)},children:"skip_next"})]})]})]})}function C(e){var t=e.info,n=e.play;return Object(v.jsxs)("div",{className:"track",children:[Object(v.jsx)("img",{className:"cover",alt:t.title+" cover",src:t.imgURL||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("p",{className:"title",children:t.title}),Object(v.jsx)("p",{className:"artist",children:t.artist})]}),Object(v.jsx)("div",{className:"control",children:Object(v.jsx)("span",{id:"add",className:"material-icons btn",onClick:n,children:"add_box"})})]})}var I=function(e){return Math.floor(e/1e3)};var P=function(){var e;Object(r.useEffect)((function(){b.init("cd9be64eeb32d1741c17cb39e41d254d")}),[]);var t=Object(r.useState)("coldStart"),n=Object(f.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)([]),u=Object(f.a)(a,2),s=u[0],d=u[1],j=Object(r.useRef)(null),h=Object(r.useState)(!1),m=Object(f.a)(h,2),p=m[0],x=m[1];Object(r.useEffect)((function(){j.current&&(p?j.current.pause():j.current.play())}),[p]);var A=Object(r.useState)(null),g=Object(f.a)(A,2),y=g[0],w=g[1],R=function(e){x(!0),w((function(t){var n=s.indexOf(t);return s[e?n+1:n-1]||(0===s.length?t:e?s[0]:s[s.length-1])}))},N=Object(r.useState)(1),E=Object(f.a)(N,2),L=E[0],B=E[1];Object(r.useEffect)((function(){y&&Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getPlayer(y.id);case 2:j.current=e.sent,j.current.play(),j.current.on("play-start",(function(){B(I(j.current.getDuration())),x(!1)}));case 5:case"end":return e.stop()}}),e)})))()}),[y]);var P=Object(r.useState)(0),_=Object(f.a)(P,2),D=_[0],F=_[1];return Object(r.useEffect)((function(){var e=setInterval((function(){j.current&&F(I(j.current.currentTime()))}),1e3);return function(){return clearInterval(e)}}),[]),p||D!==L||(console.log(D,L),R(!0)),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O,{returnInput:function(e){i("fetching"),b.getTracks(e,(function(e){i("fetched"),d(e)}))}}),Object(v.jsx)("div",{id:"searchResults",children:function(){switch(c){case"fetching":return Object(v.jsx)(k,{});case"fetched":return 0===s.length?Object(v.jsx)("div",{id:"noResult",children:"No Result :("}):s.map((function(e,t){var n;return Object(v.jsx)(C,{info:{title:e.title,artist:e.user.username,imgURL:null===(n=e.artwork_url)||void 0===n?void 0:n.replace(/large(?=.jpg)/i,"small")},play:function(){return w(s[t])}},t)}));default:return}}()}),y&&Object(v.jsx)(S,{info:{title:y.title,artist:y.user.username,timestamp:D,duration:L,imgURL:null===(e=y.artwork_url)||void 0===e?void 0:e.replace(/large(?=.jpg)/i,"t500x500")},pause:p,onPause:function(){return x((function(e){return!e}))},skip:R})]})};a.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root")),u()}},[[30,1,2]]]);
//# sourceMappingURL=main.1963804a.chunk.js.map